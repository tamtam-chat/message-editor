# –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –¥–ª—è [–¢–∞–º–¢–∞–º](https://tamtam.chat)

–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –ø–∞—Ä—Å–µ—Ä —Ç–µ–∫—Å—Ç–∞, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö (5‚Äî10 –ö–ë) —Å–æ–æ–±—â–µ–Ω–∏–π.

[–î–ï–ú–û](https://tamtam-chat.github.io/message-editor/)

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

* –ü–∞—Ä—Å–∏–Ω–≥ —ç–º–æ–¥–∂–∏ ‚ò∫Ô∏è –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–º–∞–π–ª–æ–≤ :)
* –ü–∞—Ä—Å–∏–Ω–≥ e-mail –∏ —Å—Å—ã–ª–æ–∫ —Å —É—á—ë—Ç–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ ¬´–¢—ã –±—ã–ª –Ω–∞ [tamtam.chat](https://tamtam.chat)?¬ª –∏ ¬´–ó–∞—Ö–æ–¥–∏ –Ω–∞ [tamtam.chat?a=b](https://tamtam.chat?a=b)¬ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å `?` —Å—Å—ã–ª–∫–µ.
* –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ [RFC1738](https://tools.ietf.org/html/rfc1738) –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Å—ã–ª–æ–∫, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä URL.
* –ü—Ä–µ—Ñ–∏–∫—Å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã: `@mention`, `#hashtag`, `/command`.
* –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ —Ç–µ–∫—Å—Ç–∞ (–∂–∏—Ä–Ω—ã–π, –∫—É—Ä—Å–∏–≤, –∏ —Ç.–¥.).
* –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Markdown.
* –ú–∞–ª–µ–Ω—å–∫–∏–π: –≤–µ—Å—å —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤–µ—Å–∏—Ç –≤—Å–µ–≥–æ 16 –ö–¨ (min/brotli).
* –ë—ã—Å—Ç—Ä—ã–π: –Ω–∞–ø–∏—Å–∞–Ω —Å —É—á—ë—Ç–æ–º –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö JS VM –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–¢–∞–∫ –∫–∞–∫ —Å–æ–±—Ä–∞–Ω–Ω—ã–π npm-–ø–∞–∫–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ GitHub, –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Å–Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å —Ñ–∞–π–ª `.npmrc` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–ø–∫–µ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç—É–¥–∞ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É:

```
@tamtam-chat:registry=https://npm.pkg.github.com
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É:

```sh
npm install @tamtam-chat/message-editor
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –Ω–µ–±–æ–ª—å—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä—Å–µ—Ä–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –Ω–∞–¥–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

```js
import { Editor } from '@tamtam-chat/message-editor';

// –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–º
const elem = document.getElementById('editor');

const editor = new Editor(elem, {
    value: 'Hello world! üòá'
});

// –ú–æ–∂–Ω–æ —Å–ª—É—à–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏ —Ç–µ–∫—Å—Ç–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
editor.on('editor-selectionchange', () => {
    console.log('selection changed:', editor.getSelection())
});

editor.on('editor-update', () => {
    console.log('content updated:', editor.model)
});
```

–ö–ª–∞—Å—Å `Editor` —Å–æ–∑–¥–∞—ë—Ç JS-–æ–±—ë—Ä—Ç–∫—É –Ω–∞–¥ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º DOM-—ç–ª–µ–º–µ–Ω—Ç–æ–º –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞. –° –ø–æ–º–æ—â—å—é –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –º–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞, –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∏ —Ç.–¥.

–í—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `Editor` –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç —Å –æ–ø—Ü–∏—è–º–∏ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:

* `value` ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
* `parse` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–∞—Ä—Å–µ—Ä–∞ (—Å–º. –Ω–∏–∂–µ).
* `shortcuts` ‚Äî –æ–±—ä–µ–∫—Ç, –≥–¥–µ –∫–ª—é—á–æ–º —è–≤–ª—è–µ—Ç—Å—è —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∫–ª–∞–≤–∏—à, –∞ –∑–Ω–∞—á–µ–Ω–∏–µ–º ‚Äì —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –≤—ã–∑–æ–≤ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–æ—á–µ—Ç–∞–Ω–∏—è.
* `resetFormatOnNewline` ‚Äî –µ—Å–ª–∏ `true`, –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å—Ç—Ä–æ–∫–∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
* `emoji` ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —ç–º–æ–¥–∂–∏.

–ü—Ä–∏–º–µ—Ä:

```js
const editor = new Editor(document.getElementById('editor'), {
    value: 'Hello world!',
    shortcuts: {
        'Cmd-Shift-B': (ed, evt) => {
            ed.setValue('test');
        }
    }
})
```

#### –®–æ—Ä—Ç–∫–∞—Ç—ã (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è)

–í —Ä–µ–¥–∞–∫—Ç–æ—Ä –≤—Å—Ç—Ä–æ–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω—ã—Ö —Å–æ—á–µ—Ç–∞–Ω–∏–π. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —ç—Ç–æ –∫–∞–∫–æ–π-—Ç–æ –ø–µ—á–∞—Ç–Ω—ã–π —Å–∏–º–≤–æ–ª –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã: `Shift`, `Alt`, `Ctrl`, `Meta`, `Cmd`.

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä `Cmd`, –Ω–∞ macOS –æ–Ω –±—É–¥–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å –∫–ª–∞–≤–∏—à—É Command ‚åò, –∞ –Ω–∞ Windows/Linux ‚Äî Ctrl.

–ü—Ä–∏–º–µ—Ä –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–æ—á–µ—Ç–∞–Ω–∏–π: `Cmd-Alt-V`, `Ctrl+B`, `Enter`.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä—Å–µ—Ä–∞

–ú–æ–¥—É–ª—å —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä—Å–µ—Ä–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ–∫—Å—Ç–∞: –Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤ —Ç–µ–∫—Å—Ç–µ –≤–∞–º –Ω—É–∂–Ω–æ —Ä–∞–∑–º–µ—Ç–∏—Ç—å —ç–º–æ–¥–∂–∏ –∏/–∏–ª–∏ —Å—Å—ã–ª–∫–∏. –¢–∞–∫ –∫–∞–∫ –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è tree-shaking, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–æ–¥—É–ª—è –∫–∞–∫ –ø–∞—Ä—Å–µ—Ä–∞, –∫–æ–¥ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –Ω–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –±–∞–Ω–¥–ª.

```js
import { parse } from '@tamtam-chat/message-editor';

const tokens = parse('test ü•≥ tamtam.chat');
```

–§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–ª–æ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ —Ç–æ–∫–µ–Ω–æ–≤ (—Å–º. –Ω–∏–∂–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –ø–∞—Ä—Å–µ—Ä–∞). –í –∫–∞—á–µ—Å—Ç–≤–µ –≤—Ç–æ—Ä–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–∞—Ä—Å–µ—Ä–∞:

* `markdown` ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å markdown-—Å–∏–º–≤–æ–ª—ã –¥–ª—è —Ä–∞–∑–º–µ—Ç–∫–∏. –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: `*–∂–∏—Ä–Ω—ã–π*`, `_–∫—É—Ä—Å–∏–≤_`, `~–ø–µ—Ä–µ—á—ë—Ä–∫–Ω—É—Ç—ã–π~`, &#96;`–∫–æ–¥`&#96;, `[—Ç–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏](http://example.com)`.
* `textEmoji` ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–º–∞–π–ª—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –∏ –¥–æ–±–∞–≤–∏—Ç—å –∏–º —ç–º–æ–¥–∂–∏-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.
* `hashtag` ‚Äî —Ä–∞–∑–º–µ—á–∞—Ç—å `#hashtags`.
* `mention` ‚Äî —Ä–∞–∑–º–µ—á–∞—Ç—å `@mention`.
* `command` ‚Äî —Ä–∞–∑–º–µ—á–∞—Ç—å `/command`.
* `link` ‚Äî –Ω–∞—Ö–æ–¥–∏—Ç—å –∏ —Ä–∞–∑–º–µ—á–∞—Ç—å —Å—Å—ã–ª–∫–∏ –≤ —Ç–µ–∫—Å—Ç–µ.

## –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

–ú–æ–¥–µ–ª—å, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –ø–ª–æ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ _—Ç–æ–∫–µ–Ω–æ–≤_. –¢–æ–∫–µ–Ω ‚Äì —ç—Ç–æ –µ–¥–∏–Ω–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–∞. –û–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–∞–∫ –º–∏–Ω–∏–º—É–º —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è:

* `type` (string): —Ç–∏–ø —Ç–æ–∫–µ–Ω–∞.
* `value` (string): –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞, —Ñ—Ä–∞–≥–º–µ–Ω—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.
* `format` (number): –±–∏—Ç–æ–≤–∞—è –º–∞—Å–∫–∞ —Å —Ç–µ–∫—É—â–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–∞.
* `emoji` (array): –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, –µ—Å–ª–∏ –Ω–µ –ø—É—Å—Ç–æ–µ ‚Äî —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ `value` –µ—Å—Ç—å —ç–º–æ–¥–∂–∏ –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–º–∞–π–ª—ã. –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –≤–∏–¥–∞ `{ from: 1, to: 3 }` –≥–¥–µ –ø–æ–ª—è `from` –∏ `to` —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω —Å–∏–º–≤–æ–ª–∞ —ç–º–æ–¥–∂–∏ –≤–Ω—É—Ç—Ä–∏ `value`. –ï—Å–ª–∏ –≤ —ç—Ç–æ–º –æ–±—ä–µ–∫—Ç–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ø–æ–ª–µ `emoji` ‚Äî –∑–Ω–∞—á–∏—Ç, –¥–∏–∞–ø–∞–∑–æ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Å–º–∞–π–ª, –∞ –ø–æ–ª–µ `emoji` —Å–æ–¥–µ—Ä–∂–∏—Ç –µ–≥–æ —ç–º–æ–¥–∂–∏-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ.

–ï—Å–ª–∏ —Å–∫–ª–µ–∏—Ç—å –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è `value` –º–∞—Å—Å–∏–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤, –º—ã –ø–æ–ª—É—á–∏–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É:

```js
import { parse } from '@tamtam-chat/message-editor';

const text = 'a :) üòá b'
const tokens = parse(text, { textEmoji: true });
console.log(text === tokens.map(t => t.value).join('')); // true
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø–æ–ª–µ `value` *–≤—Å–µ–≥–¥–∞* —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç, –∞ –∑–∞–º–µ–Ω–∞ —ç–º–æ–¥–∂–∏ –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–º–∞–π–ª–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ.

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ `type`, –≤ –æ–±—ä–µ–∫—Ç–µ —Ç–æ–∫–µ–Ω–∞ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

* `text` ‚Äî –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω.
* `link` ‚Äî —Å—Å—ã–ª–∫–∞, –∞–±—Å–æ–ª—é—Ç–Ω—ã–π URL —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ –ø–æ–ª–µ `link`. –¢–∞–∫–∂–µ –µ—Å—Ç—å –ø–æ–ª–µ `auto`, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –±—ã–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–ø–æ–∑–Ω–∞–Ω–∞ –≤ —Ç–µ–∫—Å—Ç–µ (`true`) –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∫–∞–∑–∞–ª —Å—Å—ã–ª–∫—É —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (`false`).
* `mention` ‚Äì —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤–∏–¥–∞ `@username`.
* `hashtag` ‚Äì —Ö—ç—à—Ç—ç–≥ –≤–∏–¥–∞ `#hashtag`.
* `command` ‚Äì –∫–æ–º–∞–Ω–¥–∞ –≤–∏–¥–∞ `/command`.

## –°–æ–±—ã—Ç–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞

–í—Å–µ —Å–æ–±—ã—Ç–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –æ–±—ã—á–Ω—ã–µ DOM-—Å–æ–±—ã—Ç–∏—è –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –ù–∞ –Ω–∏—Ö –º–æ–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –∫–∞–∫ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `elem.addEventListener(eventName, handler)`, —Ç–∞–∫ –∏ —á–µ—Ä–µ–∑ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `editor.on(eventName, handler)` —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞.

* `editor-selectionchange` ‚Äî –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ø–æ–∑–∏—Ü–∏—è –∫—É—Ä—Å–æ—Ä–∞ –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.
* `editor-formatchange` ‚Äî –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ —Ç–µ–∫—Å—Ç–∞.
* `editor-update` ‚Äî –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞.
